# Claude Code デイリーブリーフィング - 2026-02-28

## 今週のリリース概要

| バージョン | 日付 | 主な変更点 |
|-----------|------|-----------|
| **v2.1.63** | 2/28 | `/simplify`・`/batch`コマンド、HTTP フック、worktree設定共有、メモリリーク大規模修正 |
| **v2.1.62** | 2/27 | サーバーサイドKVキャッシュ改善（P1リグレッション発生 — コンテキスト圧縮後にモデルが古い状態で動作） |

[リリースノート全文](https://github.com/anthropics/claude-code/releases)

---

## 主要な新機能と実践活用

### 1. HTTP フック — シェルコマンドの代わりにURLへJSON送信 (v2.1.63)

新しいフックタイプとしてHTTPフックが追加されました。従来のフックはローカルのシェルコマンドしか実行できませんでしたが、指定したURLにJSONをPOSTし、レスポンスJSONを受け取って処理できるようになりました。Slack・Discord通知、外部CI/CDトリガー、カスタム監査ログサーバーとの連携がシェルスクリプトなしで実現できます。

```json
// .claude/settings.json の例
{
  "hooks": {
    "PostToolUse": {
      "url": "https://your-server.com/webhook",
      "method": "POST"
    }
  }
}
```

[GitHub Releases](https://github.com/anthropics/claude-code/releases)

### 2. `/simplify` & `/batch` — バンドルスラッシュコマンド (v2.1.63)

2つの新しいバンドルスラッシュコマンドが追加されました。`/simplify`は複雑なコードを簡潔にリファクタリングするコマンドで、`/batch`は複数ファイルに対する反復作業を一括処理するコマンドです。以前は長いプロンプトで説明が必要だった作業を、コマンド1つで実行できます。

```bash
/simplify  # 現在のコンテキストのコードを簡潔にリファクタリング
/batch     # 複数ファイルへの反復作業を一括実行
```

[GitHub Releases](https://github.com/anthropics/claude-code/releases)

### 3. Git Worktree間でプロジェクト設定・自動メモリを共有 (v2.1.63)

同一リポジトリのgit worktreeがプロジェクト設定と自動メモリを共有するようになりました。以前はworktreeごとに設定が分離されており、CLAUDE.md、自動メモリ、プロジェクト設定をそれぞれ管理する必要がありました。今後は1つのworktreeで学習したコンテキストが、同じリポジトリの全worktreeに自動適用されます。マルチブランチの並列作業ワークフローで特に便利です。

[GitHub Releases](https://github.com/anthropics/claude-code/releases)

---

## 開発者ワークフローティップス

### v2.1.62 Stale Contextリグレッション — 長時間セッションに注意

v2.1.62（2/27デプロイ）ではサーバーサイドKVキャッシュの改善が適用されましたが、コンテキスト圧縮（compaction）イベント時のキャッシュ無効化が漏れており、P1リグレッションが発生しました。圧縮後にモデルが古い状態に基づいて応答し、ファイルが存在するのに「存在しない」と主張したり、ユーザーの指示を無視して以前のタスク計画を実行し続ける症状が報告されています。

**対処法：**
1. **v2.1.63へ即時アップデート** — 本日リリースされたバージョンに関連修正が含まれています
2. **長いセッションは定期的に`/clear`でリセット** — 圧縮が発生する前にセッションを初期化
3. **モデルが異常な応答を示したら新しいセッションを開始** — staleキャッシュは新規セッションでは発生しません

[GitHub Issue #29230](https://github.com/anthropics/claude-code/issues/29230)

### v2.1.63で8件以上のメモリリークを一斉修正 — 長時間セッションの安定性が大幅改善

v2.1.63では8件以上のメモリリークがまとめて修正されました。長時間Claude Codeを実行するユーザーに直接的な影響があります。

**修正されたリーク一覧：**
- Gitルート検出キャッシュの無制限増加
- JSONパースキャッシュの無制限増加
- Bashコマンドプレフィックスキャッシュ
- MCPサーバーfetchキャッシュ（再接続時に未クリア）
- チームメイトメッセージがAppStateから圧縮後も未解放
- Bridgeポーリングループのリスナーリーク
- MCP OAuthフロークリーンアップのリスナーリーク
- インタラクティブ権限ハンドラーのリスナーリーク
- フック設定メニューのメモリリーク
- IDEホストIP検出キャッシュのポート間誤共有
- WebSocket転送再接続時のリスナーリーク

サブエージェント・チームメイトを使う長時間セッションで特に効果的です。

[GitHub Releases](https://github.com/anthropics/claude-code/releases)

---

## セキュリティ・制限事項

### トランプ大統領、全連邦機関にAnthropic使用停止を命令 — サプライチェーンリスク指定 (2/27)

昨日（2/27）の最後通牒期限後、事態が急速にエスカレートしました。トランプ大統領がすべての連邦機関にAnthropic技術の即時使用停止を命じ、国防総省がAnthropicを「サプライチェーンリスク」に公式指定しました。この指定は通常、敵対国の企業に適用される措置で、国防総省の契約業者もAnthropic AI の使用が制限されます。既存の使用機関には6ヶ月の段階的廃止期間が設けられました。

Dario Amodei CEOは同日「国防省（Department of War）との協議に関する声明」を発表し、Anthropicが情報分析・作戦計画・サイバー作戦などにClaudeを積極的に配備してきたものの、**完全自律型兵器**と**米国市民に対する大規模監視**という2つのレッドラインは譲れないと再確認しました。「これらの脅威が我々の立場を変えることはありません。良心に従い、この要求に応じることはできません」と述べています。

Anthropicは「サプライチェーンリスク」指定に対して法的対応を予告しました。

[Anthropic公式声明](https://www.anthropic.com/news/statement-department-of-war) | [NPR](https://www.npr.org/2026/02/27/nx-s1-5729118/trump-anthropic-pentagon-openai-ai-weapons-ban) | [CNBC](https://www.cnbc.com/2026/02/27/trump-anthropic-ai-pentagon.html) | [Washington Post](https://www.washingtonpost.com/technology/2026/02/27/anthropic-pentagon-lethal-military-ai/)

---

## エコシステム＆プラグイン

### claude.ai MCPサーバーの無効化オプション追加 (v2.1.63)

環境変数`ENABLE_CLAUDEAI_MCP_SERVERS=false`が追加され、claude.aiが提供するMCPサーバーをClaude Codeで使用しないよう設定できるようになりました。承認済みのMCPサーバーのみに制限したいエンタープライズ環境や、不要なツールロードを減らしてコンテキスト効率を高めたい場合に有用です。

```bash
# claude.ai MCPサーバーを無効化
export ENABLE_CLAUDEAI_MCP_SERVERS=false
```

### MCP OAuth手動URLペーストフォールバック (v2.1.63)

MCPサーバーOAuth認証時に自動localhostリダイレクトが動作しない場合、コールバックURLを手動でペーストして認証を完了できるフォールバックが追加されました。SSHリモート環境やポートフォワーディングが制限された環境でのMCP OAuth認証失敗を解決します。

[GitHub Releases](https://github.com/anthropics/claude-code/releases)

---

## コミュニティニュース

- **テック労働者連合、Anthropicを公開書簡で支持**: Google社員300人以上、OpenAI社員60人以上が、自社経営陣にAnthropicの立場を支持し、国防総省の無制限AI使用要求を拒否するよう求める公開書簡に署名しました。Amazon Employees for Climate Justice、Alphabet Workers Union、No Tech for Apartheidなどの労働団体も合流し、70万人以上の労働者を代表する連合が形成されています。 [TechCrunch](https://techcrunch.com/2026/02/27/employees-at-google-and-openai-support-anthropics-pentagon-stand-in-open-letter/) | [Bloomberg](https://www.bloomberg.com/news/articles/2026-02-27/anthropic-s-feud-with-pentagon-mushrooms-into-broader-battle)

- **Sam Altman、緊張緩和の仲介を示唆**: OpenAI CEOのSam Altmanが、Pentagon-Anthropic紛争の「緊張緩和に協力したい」と発言しました。自社の社員がAnthropicを支持する書簡に署名する中での発言であり、AI業界全体が軍事AI利用の制限について立場の明確化を求められています。 [CNBC](https://www.cnbc.com/2026/02/27/openai-sam-altman-de-escalate-tensions-pentagon-anthropic.html)

- **Anthropicリスクレポート2月号を公開**: AnthropicがRSP 3.0に基づく最初のリスクレポートを公開しました。フロンティアモデルのリスク評価と安全対策の現状をまとめており、今後3～6ヶ月周期で発行される予定です。 [Anthropic](https://www-cdn.anthropic.com/08eca2757081e850ed2ad490e5253e940240ca4f.pdf)

---

## 知っておくと便利な小さな変更点

- **`/copy`に「Always copy full response」オプション** (v2.1.63): 選択すると、以降の`/copy`実行時にコードブロックピッカーをスキップし、全応答を直接コピーします。
- **VS Code: セッションのリネーム・削除アクション** (v2.1.63): セッションリストから直接名前変更と削除が可能です。リモートセッションも会話履歴に表示されるようになりました。
- **`/clear`でキャッシュされたskillをリセット** (v2.1.63): 新しい会話開始時に以前のskill内容が残留していた問題が修正されました。
- **`/model`メニュー改善** (v2.1.63): スラッシュコマンドメニューに現在アクティブなモデルが表示されます。
- **ローカルスラッシュコマンド出力の修正** (v2.1.63): `/cost`などの出力がユーザー送信メッセージではなくシステムメッセージとして正しく表示されます。
- **REPLブリッジメッセージ順序の競合状態修正** (v2.1.63): 初期接続時に新しいメッセージと履歴メッセージが混在していた問題が解決されました。
- **ファイルカウントキャッシュのglob ignoreパターン未適用**修正 (v2.1.63): ignoreパターンがファイルカウントキャッシュに正しく反映されます。
